# Запуск:

Для работы необходимо запустить rabbitmq
> docker run -d --hostname my-rabbit --name rabbit -p 5672:5672 -p 15672:15672 rabbitmq:3-management

### Запустить proxy

### Запустить cache. Cache запускается в двух экземплярах. Каждому экземпляру нужно передать при запуске аргумент (VM Options):
> -. Для инстанса 1: -Dspring.profiles.active=cache1
> -. Для инстанса 2: -Dspring.profiles.active=cache2

# Описание

#### Принцип работы сервиса:
- При поступлении запроса на запись/обновление сервис proxy посылает сообщение в брокер сообщений. Брокер рассылает сообщение в сервисы cache
- В брокере сообщений используется автоудаляемая очередь. При отключении сервиса cache удаляется очередь с сообщениями для имитации потерь сообщений, чтобы после переподключения сервис не получил накопившиеся сообщения.
- В Entity вместо версии используется время.
- При запросе на чтение сервис proxy выполняет rest запрос к сервисам cache.
- Запросы выполняются паралельно.
- При получении ответа proxy сравнивает полученные ответы.
- Если время изменеия отличается, в брокер выполняется запрос на обновление.
